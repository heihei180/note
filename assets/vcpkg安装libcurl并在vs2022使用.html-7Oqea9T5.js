import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-Ba_JiEk7.js";const t={};function e(p,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h1 id="libcurl-下载网络文件" tabindex="-1"><a class="header-anchor" href="#libcurl-下载网络文件"><span>libcurl 下载网络文件</span></a></h1><blockquote><p>使用 vcpkg 安装 libcurl</p></blockquote><h1 id="安装vkpkg" tabindex="-1"><a class="header-anchor" href="#安装vkpkg"><span>安装vkpkg</span></a></h1><h2 id="_1-download" tabindex="-1"><a class="header-anchor" href="#_1-download"><span>1. download</span></a></h2><p>从GitHub上下载vcpkg工具，下载地址： <code>git clone https://github.com/Microsoft/vcpkg.git</code></p><p>下载后，进入 <code>vcpkg</code> 目录<br> 执行 <code>bootstrap-vcpkg.bat</code><br> 会自动下载 vcpkg 程序</p><h2 id="_2-需要的话可以配置环境变量" tabindex="-1"><a class="header-anchor" href="#_2-需要的话可以配置环境变量"><span>2. 需要的话可以配置环境变量</span></a></h2><p>vcpkg 是一个c/c++库管理工具，可以方便的安装各种库，比如libcurl</p><h1 id="_2-安装-libcurl" tabindex="-1"><a class="header-anchor" href="#_2-安装-libcurl"><span>2.安装 libcurl</span></a></h1><p><a href="https://blog.csdn.net/shhpeng/article/details/136006113" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/shhpeng/article/details/136006113</a></p><p>安装命令：<br><code>shell vcpkg.exe install curl:x64-windows</code></p><p>成功截图：<br><img src="https://i-blog.csdnimg.cn/direct/a2595c1c36ff44648758032870cbc985.png" alt="libcurl的安装位置" loading="lazy"></p><h1 id="_3-vs2022-引用库" tabindex="-1"><a class="header-anchor" href="#_3-vs2022-引用库"><span>3.vs2022 引用库</span></a></h1><p><a href="https://www.cnblogs.com/ligang0357/p/17188394.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/ligang0357/p/17188394.html</a></p><figure><img src="https://i-blog.csdnimg.cn/direct/505f472496414b29a56661ff10a43ca7.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><figure><img src="https://i-blog.csdnimg.cn/direct/5b62d31aa0b141bf9e24f334682f1b5a.png" alt="在这里插入图片描述" tabindex="0" loading="lazy"><figcaption>在这里插入图片描述</figcaption></figure><h1 id="_4-使用库" tabindex="-1"><a class="header-anchor" href="#_4-使用库"><span>4. 使用库</span></a></h1><div class="language-cpp line-numbers-mode" data-highlighter="shiki" data-ext="cpp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-cpp"><span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;iostream&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">#include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &lt;curl/curl.h&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 回调函数，用于接收下载的数据  </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> write_data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> ptr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">size_t</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> nmemb</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">FILE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;"> stream</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    size_t</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> written </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fwrite</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(ptr, size, nmemb, stream);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> written;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">void</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    CURL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> curl;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    FILE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fp;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    CURLcode res;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    curl_global_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(CURL_GLOBAL_ALL);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    curl </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> curl_easy_init</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (curl) {</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 打开文件用于写入  </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        int</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> code </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> fopen_s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">( </span><span style="--shiki-light:#A626A4;--shiki-dark:#56B6C2;">&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">fp,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;downloaded_file.mp4&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;wb&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;open file result code&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> code </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 设置URL  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        curl_easy_setopt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(curl, CURLOPT_URL, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://v3-default.365yg.com/d4f33a9ffe99ddd16160a1f9db76e3d1/66c59602/video/tos/cn/tos-cn-ve-4/owJAVf64fgCRDqoERI1EAiBDJAdFIuW7mRdcjJ/?a=0&amp;ch=0&amp;cr=0&amp;dr=0&amp;er=0&amp;lr=unwatermarked&amp;net=5&amp;cd=0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%7C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%7C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%7C</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">0&amp;cv=1&amp;br=3804&amp;bt=3804&amp;cs=0&amp;ds=4&amp;eid=21760&amp;ft=E3rg311Wv_SQ94iZxG0Id.xclfP8lciC~H3VWHrKsE&amp;mime_type=video_mp4&amp;qs=0&amp;rc=PGg1ODVpNmY1Z2g0NzwzZkBpamtrOnQ5cnJ0czMzNDczM0AwNC41YjQyXjUxNGAuLjIyYSNecmBrMmRrYm9gLS1kLTBzcw</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%3D%3D</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&amp;btag=c0000e00028000&amp;dy_q=1724221201&amp;feature_id=df0cd2e352f757347f92c05051e140af&amp;l=20240821142001FC23A856EC1AD1009D39&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 设置回调函数和文件指针  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        curl_easy_setopt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(curl, CURLOPT_WRITEFUNCTION, write_data);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        curl_easy_setopt</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(curl, CURLOPT_WRITEDATA, fp);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 执行下载  </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        res </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">=</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> curl_easy_perform</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(curl);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 检查错误  </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (res </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">!=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> CURLE_OK)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">            fprintf</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(stderr, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;curl_easy_perform() failed: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">%s</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                curl_easy_strerror</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(res));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 清理  </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        curl_easy_cleanup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(curl);</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        fclose</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(fp);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    curl_global_cleanup</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    std::cout </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">&lt;&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;file download complete&quot;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> &lt;&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> std::endl;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    return</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18)]))}const r=i(t,[["render",e]]),d=JSON.parse('{"path":"/cpp/4.%E7%8E%A9%E5%85%B7/vcpkg%E5%AE%89%E8%A3%85libcurl%E5%B9%B6%E5%9C%A8vs2022%E4%BD%BF%E7%94%A8.html","title":"libcurl 下载网络文件","lang":"zh-CN","frontmatter":{"description":"libcurl 下载网络文件 使用 vcpkg 安装 libcurl 安装vkpkg 1. download 从GitHub上下载vcpkg工具，下载地址： git clone https://github.com/Microsoft/vcpkg.git 下载后，进入 vcpkg 目录 执行 bootstrap-vcpkg.bat 会自动下载 vcpk...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"libcurl 下载网络文件\\",\\"image\\":[\\"https://i-blog.csdnimg.cn/direct/a2595c1c36ff44648758032870cbc985.png\\",\\"https://i-blog.csdnimg.cn/direct/505f472496414b29a56661ff10a43ca7.png\\",\\"https://i-blog.csdnimg.cn/direct/5b62d31aa0b141bf9e24f334682f1b5a.png\\"],\\"dateModified\\":\\"2025-08-04T07:01:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"heihei180\\",\\"url\\":\\"https://github.com/heihei180\\"}]}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/note/cpp/4.%E7%8E%A9%E5%85%B7/vcpkg%E5%AE%89%E8%A3%85libcurl%E5%B9%B6%E5%9C%A8vs2022%E4%BD%BF%E7%94%A8.html"}],["meta",{"property":"og:site_name","content":"筆記本首頁"}],["meta",{"property":"og:title","content":"libcurl 下载网络文件"}],["meta",{"property":"og:description","content":"libcurl 下载网络文件 使用 vcpkg 安装 libcurl 安装vkpkg 1. download 从GitHub上下载vcpkg工具，下载地址： git clone https://github.com/Microsoft/vcpkg.git 下载后，进入 vcpkg 目录 执行 bootstrap-vcpkg.bat 会自动下载 vcpk..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://i-blog.csdnimg.cn/direct/a2595c1c36ff44648758032870cbc985.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-04T07:01:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-04T07:01:30.000Z"}]]},"git":{"createdTime":1754290890000,"updatedTime":1754290890000,"contributors":[{"name":"wanggq10","username":"wanggq10","email":"wanggq10@lenovo.com","commits":1,"url":"https://github.com/wanggq10"}]},"readingTime":{"minutes":1.18,"words":354},"filePathRelative":"cpp/4.玩具/vcpkg安装libcurl并在vs2022使用.md","autoDesc":true}');export{r as comp,d as data};
