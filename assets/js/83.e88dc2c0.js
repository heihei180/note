(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{585:function(a,t,s){"use strict";s.r(t);var e=s(27),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_1-zookeeper-环境搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-zookeeper-环境搭建"}},[a._v("#")]),a._v(" 1.Zookeeper 环境搭建")]),a._v(" "),t("blockquote",[t("p",[a._v("Zookeeper 源码环境搭建")])]),a._v(" "),t("h1",{attrs:{id:"_2-准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-准备"}},[a._v("#")]),a._v(" 2. 准备")]),a._v(" "),t("h2",{attrs:{id:"_2-1-启动类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-启动类"}},[a._v("#")]),a._v(" 2.1 启动类")]),a._v(" "),t("p",[a._v("根据启动脚本"),t("code",[a._v("zkServer.bat")]),a._v(" 知道，启动类是"),t("code",[a._v("org.apache.zookeeper.server.quorum.QuorumPeerMain")]),a._v(".")]),a._v(" "),t("p",[a._v("另外需要先修改一些配置信息，")]),a._v(" "),t("h2",{attrs:{id:"_2-2-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配置"}},[a._v("#")]),a._v(" 2.2 配置")]),a._v(" "),t("p",[a._v("需要将conf文件下的"),t("code",[a._v("zoo.sample.cfg")]),a._v(" 复制一份，做修改，"),t("code",[a._v("zoo.cfg")]),a._v(" 然后指定到idea的启动类， program param 里边 "),t("code",[a._v("conf/zoo.cfg")])]),a._v(" "),t("h2",{attrs:{id:"_2-3-maven-pom文件修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-maven-pom文件修改"}},[a._v("#")]),a._v(" 2.3 maven pom文件修改")]),a._v(" "),t("p",[a._v("将pom中 "),t("code",[a._v("<scope>provide</scope>")]),a._v(" 的行注释掉，否则她不会加载 jar 进来，运行找不到 Java类")]),a._v(" "),t("h2",{attrs:{id:"_2-4-日志配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-日志配置"}},[a._v("#")]),a._v(" 2.4 日志配置")]),a._v(" "),t("p",[a._v("再"),t("code",[a._v("zookeeper-server")]),a._v(" 下的模块中的"),t("code",[a._v("pom.xml")]),a._v(" 添加maven坐标")]),a._v(" "),t("div",{staticClass:"language-xml extra-class"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("ch.qos.logback"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("groupId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("logback-classic"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("artifactId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("1.2.10"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("version")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("dependency")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n\n")])])]),t("p",[a._v("导入 logback 日志框架，可以不添加日志配置文件就打印日志，方便调试。")]),a._v(" "),t("h1",{attrs:{id:"_3-启动zk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动zk"}},[a._v("#")]),a._v(" 3.启动zk")]),a._v(" "),t("p",[t("code",[a._v("org.apache.zookeeper.server.quorum.QuorumPeerMain#main")]),a._v("\n执行主函数，启动zk")])])}),[],!1,null,null,null);t.default=r.exports}}]);