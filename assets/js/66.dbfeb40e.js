(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{569:function(a,t,s){"use strict";s.r(t);var e=s(27),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"topicconfigmanager"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#topicconfigmanager"}},[a._v("#")]),a._v(" TopicConfigManager")]),a._v(" "),t("blockquote",[t("p",[a._v("管理rmq集群中的所有topic，包括用户自定义的topic以及系统内部的系统级toic")])]),a._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/gq2/img_repo2/raw/master/img/image-20240126232259734.png",alt:"image-20240126232259734"}})]),a._v(" "),t("p",[a._v("上图证明他也是会被存储到本地磁盘的，存储路径是：./config/topics.json")]),a._v(" "),t("p",[a._v("反序列化对象是：TopicConfigSerializeWrapper")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TopicConfigSerializeWrapper")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("RemotingSerializable")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConcurrentMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TopicConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" topicConfigTable "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConcurrentHashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TopicConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DataVersion")]),a._v(" dataVersion "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DataVersion")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// setter\\ getter")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("h2",{attrs:{id:"核心参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心参数"}},[a._v("#")]),a._v(" 核心参数")]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/**\n * topic 配置表，持有所有topic的配置对象的映射表\n */")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConcurrentMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TopicConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v(" topicConfigTable "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("ConcurrentHashMap")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("String")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("TopicConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1024")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("topic 配置映射表，即所有的topic的配置对象，都在这里边放着。")]),a._v(" "),t("h2",{attrs:{id:"核心行为"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心行为"}},[a._v("#")]),a._v(" 核心行为")]),a._v(" "),t("h3",{attrs:{id:"构造器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造器"}},[a._v("#")]),a._v(" 构造器")]),a._v(" "),t("p",[a._v("创建的时候，这个对象会创建几个默认的topic，注意是系统级别的topic。")]),a._v(" "),t("ol",[t("li",[a._v(".SELF_TEST_TOPIC")]),a._v(" "),t("li",[a._v(".TBW102")]),a._v(" "),t("li",[a._v(".BenchmarkTest 用于基准测试")]),a._v(" "),t("li",[a._v(".this.brokerController.getBrokerConfig().getBrokerClusterName() 不知道用集群名字可以干嘛")]),a._v(" "),t("li",[a._v(".this.brokerController.getBrokerConfig().getBrokerName() 当前brokername 不知道用来干嘛")]),a._v(" "),t("li",[a._v(".TopicValidator.RMQ_SYS_OFFSET_MOVED_EVENT ： 这个好像是移动事件，但是也不确认")]),a._v(" "),t("li",[a._v(".TopicValidator.RMQ_SYS_SCHEDULE_TOPIC 这个用于处理延迟消息的topic")]),a._v(" "),t("li",[a._v(".this.brokerController.getBrokerConfig().getMsgTraceTopicName() 也不知道 trace的干嘛")]),a._v(" "),t("li",[a._v('.this.brokerController.getBrokerConfig().getBrokerClusterName() + "_" + MixAll.REPLY_TOPIC_POSTFIX 这个好像是用于消息重试的topic')])]),a._v(" "),t("h2",{attrs:{id:"添加queue"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加queue"}},[a._v("#")]),a._v(" 添加queue")]),a._v(" "),t("p",[a._v("其实很简单，但是我看不懂，就是根据给定的数据，创建一个topicConfig对象，然后放入到map中即可。")])])}),[],!1,null,null,null);t.default=n.exports}}]);