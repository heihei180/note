import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as i}from"./app-qQ-ljpVm.js";const l={};function p(d,s){return i(),a("div",null,s[0]||(s[0]=[e(`<h1 id="jenkins-任务配置" tabindex="-1"><a class="header-anchor" href="#jenkins-任务配置"><span>Jenkins 任务配置</span></a></h1><h2 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置"><span>环境配置</span></a></h2><p>打开菜单：<br><code>manage Jenkins -&gt; Tools</code></p><ul><li>选择Git地址</li><li>配置Maven地址</li><li>点击Jdk安装，配置Jdk 记住这个别名，再之后的pipline中会使用</li></ul><h2 id="创建流水线" tabindex="-1"><a class="header-anchor" href="#创建流水线"><span>创建流水线</span></a></h2><p>菜单： <code>Dashboard -&gt; 新建Items</code></p><h3 id="新建freestyle-project" tabindex="-1"><a class="header-anchor" href="#新建freestyle-project"><span>新建freeStyle project</span></a></h3><p>选择freeStyle类型项目</p><p>点击完成，进入项目配置：</p><ol><li>源码管理选择Git</li><li>填写仓库git地址，如：<code>https://github.com/Coveros-GitHub-Sandbox/helloworld.git</code></li><li>Credentials 这里如果是公开的仓库，就选择无，如果是带有访问权限的仓库，需要添加访问令牌</li><li>Branches to build： 选择需要构建的分支</li><li>Triggers 触发器，什么时候触发，我这里选择自己主动触发，不选择自动触发</li><li>Environment 这里有个 <code>Delete workspace before build starts</code> 构建前自动清理工作空间，默认的工作空间再C盘下 users 下 .jenkins 文件夹下</li><li>Build Steps 添加构建步骤 <ul><li>7.1 第一步克隆代码，上面已经配置了</li><li>7.2 拉取代码后进行打包，即执行命令：<code>mvn clean package</code></li><li>7.3 打包成功后，运行代码： <code>java -cp target/helloworld-1.1.jar com.coveros.demo.helloworld.HelloWorld</code></li><li>因为当前是Windows环境，所以添加构建步骤时，选择：<code>Execute Windows batch command</code> , 执行windows 批处理脚本：</li><li>将这两个步骤添加后，还有构建后的步骤，如果需要添加再自行配置吧。</li></ul></li><li>配置完成之后，点击应用，保存。</li></ol><p>然后Jenkins 会返回到刚刚创建这个项目的管理界面，点击 <code>Build Now</code> 触发一次构建。</p><h2 id="新建流水线类型的项目-pipline" tabindex="-1"><a class="header-anchor" href="#新建流水线类型的项目-pipline"><span>新建流水线类型的项目 Pipline</span></a></h2><p>这里没啥配置的，和哪个差不多，主要就是定义流水线，可以直接写流水线脚本，也可以自己写好JenkinsFile, 指定JenkinsFile的路径，我这里写 流水线脚本</p><p>定义如下：</p><div class="language-grovvy line-numbers-mode" data-highlighter="shiki" data-ext="grovvy" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-grovvy"><span class="line"><span>pipeline {</span></span>
<span class="line"><span>    agent any</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    tools {</span></span>
<span class="line"><span>        // 安装配置为&quot;M3&quot;的Maven版本并将其添加到PATH中</span></span>
<span class="line"><span>        maven &quot;maven3&quot;</span></span>
<span class="line"><span>        // 如果需要特定版本的JDK，可以在这里配置</span></span>
<span class="line"><span>		// 这个取值是之前再 manageJenkins-tools中配置的Jdk</span></span>
<span class="line"><span>        jdk &quot;jdk17&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    environment {</span></span>
<span class="line"><span>        // 定义应用程序的主类（如果需要在多个地方使用）</span></span>
<span class="line"><span>        MAIN_CLASS = &quot;com.coveros.demo.helloworld.HelloWorld&quot;</span></span>
<span class="line"><span>        JAR_FILE = &quot;target/helloworld-1.1.jar&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    stages {</span></span>
<span class="line"><span>        stage(&#39;Checkout&#39;) {</span></span>
<span class="line"><span>            steps {</span></span>
<span class="line"><span>                // 从GitHub仓库检出代码</span></span>
<span class="line"><span>                git url: &#39;https://github.com/Coveros-GitHub-Sandbox/helloworld.git&#39;, branch: &#39;master&#39;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        stage(&#39;Build&#39;) {</span></span>
<span class="line"><span>            steps {</span></span>
<span class="line"><span>                // 执行Maven构建命令</span></span>
<span class="line"><span>                sh &quot;mvn clean package&quot;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        stage(&#39;Run Application&#39;) {</span></span>
<span class="line"><span>            steps {</span></span>
<span class="line"><span>                // 运行Java应用程序</span></span>
<span class="line"><span>                sh &quot;java -cp \${JAR_FILE} \${MAIN_CLASS}&quot;</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    post {</span></span>
<span class="line"><span>        always {</span></span>
<span class="line"><span>            // 无论构建结果如何，都记录测试结果</span></span>
<span class="line"><span>            echo &quot;build success&quot;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        success {</span></span>
<span class="line"><span>            // 构建成功时归档生成的JAR文件</span></span>
<span class="line"><span>            archiveArtifacts artifacts: &quot;\${JAR_FILE}&quot;, fingerprint: true</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        failure {</span></span>
<span class="line"><span>            // 构建失败时发送通知（可选）</span></span>
<span class="line"><span>            mail to: &#39;team@example.com&#39;,</span></span>
<span class="line"><span>                 subject: &quot;Pipeline Failed: \${currentBuild.fullDisplayName}&quot;,</span></span>
<span class="line"><span>                 body: &quot;Something went wrong with the build.&quot;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="构建skywalking的脚本" tabindex="-1"><a class="header-anchor" href="#构建skywalking的脚本"><span>构建skywalking的脚本</span></a></h2><div class="language-grovvy line-numbers-mode" data-highlighter="shiki" data-ext="grovvy" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-grovvy"><span class="line"><span>pipeline {</span></span>
<span class="line"><span>    agent any</span></span>
<span class="line"><span>    stages {</span></span>
<span class="line"><span>        stage(&#39;Checkout&#39;) {</span></span>
<span class="line"><span>            steps {</span></span>
<span class="line"><span>                 git(</span></span>
<span class="line"><span>                    url: &#39;https://github.com/apache/skywalking.git&#39;,</span></span>
<span class="line"><span>                    branch: &#39;master&#39;, </span></span>
<span class="line"><span>                    credentialsId: &#39;&#39; // 如果需要认证</span></span>
<span class="line"><span>                )</span></span>
<span class="line"><span>                // sh &#39;cd skywalking&#39;</span></span>
<span class="line"><span>                sh &#39;git submodule init&#39;</span></span>
<span class="line"><span>                sh &#39;git submodule update --recursive&#39; // 更新所有子模块</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        stage(&#39;Build&#39;) {</span></span>
<span class="line"><span>            steps {</span></span>
<span class="line"><span>                sh &#39;mvn clean package -Dmaven.test.skip=true&#39; // 根据实际构建命令修改</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面这些命令执行完成之后，就会再工作空间生成构建产物，可以将这些构建产物推送到远程服务器之后，或者上传镜像之后，清空工作空间。发送通知邮件之类的操作.</p>`,18)]))}const r=n(l,[["render",p]]),v=JSON.parse('{"path":"/Java/Jenkins/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html","title":"Jenkins 任务配置","lang":"zh-CN","frontmatter":{"description":"Jenkins 任务配置 环境配置 打开菜单： manage Jenkins -> Tools 选择Git地址 配置Maven地址 点击Jdk安装，配置Jdk 记住这个别名，再之后的pipline中会使用 创建流水线 菜单： Dashboard -> 新建Items 新建freeStyle project 选择freeStyle类型项目 点击完成，进入...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Jenkins 任务配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-04T07:01:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"heihei180\\",\\"url\\":\\"https://github.com/heihei180\\"}]}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/note/Java/Jenkins/%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE.html"}],["meta",{"property":"og:site_name","content":"筆記本首頁"}],["meta",{"property":"og:title","content":"Jenkins 任务配置"}],["meta",{"property":"og:description","content":"Jenkins 任务配置 环境配置 打开菜单： manage Jenkins -> Tools 选择Git地址 配置Maven地址 点击Jdk安装，配置Jdk 记住这个别名，再之后的pipline中会使用 创建流水线 菜单： Dashboard -> 新建Items 新建freeStyle project 选择freeStyle类型项目 点击完成，进入..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-04T07:01:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-04T07:01:30.000Z"}]]},"git":{"createdTime":1754290890000,"updatedTime":1754290890000,"contributors":[{"name":"wanggq10","username":"wanggq10","email":"wanggq10@lenovo.com","commits":1,"url":"https://github.com/wanggq10"}]},"readingTime":{"minutes":2.66,"words":799},"filePathRelative":"Java/Jenkins/基础配置.md","autoDesc":true}');export{r as comp,v as data};
