import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as e,o as t}from"./app-qJQc_jDN.js";const n={};function l(p,i){return t(),a("div",null,i[0]||(i[0]=[e(`<h1 id="topicconfigmanager" tabindex="-1"><a class="header-anchor" href="#topicconfigmanager"><span>TopicConfigManager</span></a></h1><blockquote><p>管理rmq集群中的所有topic，包括用户自定义的topic以及系统内部的系统级toic</p></blockquote><figure><img src="https://gitee.com/gq2/img_repo2/raw/master/img/image-20240126232259734.png" alt="image-20240126232259734" tabindex="0" loading="lazy"><figcaption>image-20240126232259734</figcaption></figure><p>上图证明他也是会被存储到本地磁盘的，存储路径是：./config/topics.json</p><p>反序列化对象是：TopicConfigSerializeWrapper</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TopicConfigSerializeWrapper</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> extends</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> RemotingSerializable</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentMap</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TopicConfig</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> topicConfigTable </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TopicConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> DataVersion</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> dataVersion </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> DataVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    // setter\\ getter</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="核心参数" tabindex="-1"><a class="header-anchor" href="#核心参数"><span>核心参数</span></a></h2><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">/**</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> * topic 配置表，持有所有topic的配置对象的映射表</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> */</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> final</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentMap</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TopicConfig</span><span style="--shiki-light:#E45649;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> topicConfigTable </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    new</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> ConcurrentHashMap</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> TopicConfig</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">)</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>topic 配置映射表，即所有的topic的配置对象，都在这里边放着。</p><h2 id="核心行为" tabindex="-1"><a class="header-anchor" href="#核心行为"><span>核心行为</span></a></h2><h3 id="构造器" tabindex="-1"><a class="header-anchor" href="#构造器"><span>构造器</span></a></h3><p>创建的时候，这个对象会创建几个默认的topic，注意是系统级别的topic。</p><ol><li>.SELF_TEST_TOPIC</li><li>.TBW102</li><li>.BenchmarkTest 用于基准测试</li><li>.this.brokerController.getBrokerConfig().getBrokerClusterName() 不知道用集群名字可以干嘛</li><li>.this.brokerController.getBrokerConfig().getBrokerName() 当前brokername 不知道用来干嘛</li><li>.TopicValidator.RMQ_SYS_OFFSET_MOVED_EVENT ： 这个好像是移动事件，但是也不确认</li><li>.TopicValidator.RMQ_SYS_SCHEDULE_TOPIC 这个用于处理延迟消息的topic</li><li>.this.brokerController.getBrokerConfig().getMsgTraceTopicName() 也不知道 trace的干嘛</li><li>.this.brokerController.getBrokerConfig().getBrokerClusterName() + &quot;_&quot; + MixAll.REPLY_TOPIC_POSTFIX 这个好像是用于消息重试的topic</li></ol><h2 id="添加queue" tabindex="-1"><a class="header-anchor" href="#添加queue"><span>添加queue</span></a></h2><p>其实很简单，但是我看不懂，就是根据给定的数据，创建一个topicConfig对象，然后放入到map中即可。</p>`,15)]))}const o=s(n,[["render",l]]),k=JSON.parse('{"path":"/Java/RocketMQ/brokerController%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/TopicConfigManager.html","title":"TopicConfigManager","lang":"zh-CN","frontmatter":{"description":"TopicConfigManager 管理rmq集群中的所有topic，包括用户自定义的topic以及系统内部的系统级toic image-20240126232259734image-20240126232259734 上图证明他也是会被存储到本地磁盘的，存储路径是：./config/topics.json 反序列化对象是：TopicConfigSe...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"TopicConfigManager\\",\\"image\\":[\\"https://gitee.com/gq2/img_repo2/raw/master/img/image-20240126232259734.png\\"],\\"dateModified\\":\\"2025-08-04T07:01:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"heihei180\\",\\"url\\":\\"https://github.com/heihei180\\"}]}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/note/Java/RocketMQ/brokerController%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D/TopicConfigManager.html"}],["meta",{"property":"og:site_name","content":"筆記本首頁"}],["meta",{"property":"og:title","content":"TopicConfigManager"}],["meta",{"property":"og:description","content":"TopicConfigManager 管理rmq集群中的所有topic，包括用户自定义的topic以及系统内部的系统级toic image-20240126232259734image-20240126232259734 上图证明他也是会被存储到本地磁盘的，存储路径是：./config/topics.json 反序列化对象是：TopicConfigSe..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://gitee.com/gq2/img_repo2/raw/master/img/image-20240126232259734.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-04T07:01:30.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-04T07:01:30.000Z"}]]},"git":{"createdTime":1754290890000,"updatedTime":1754290890000,"contributors":[{"name":"wanggq10","username":"wanggq10","email":"wanggq10@lenovo.com","commits":1,"url":"https://github.com/wanggq10"}]},"readingTime":{"minutes":1.07,"words":322},"filePathRelative":"Java/RocketMQ/brokerController组件介绍/TopicConfigManager.md","autoDesc":true}');export{o as comp,k as data};
